A, B := Int | Top | A -> B | mu a. A
~ ::= < | ={a*}{}
m ::= + | -
T ::= . | T, a_m

=============
T |-{m} A ~ B
=============

T |-{m} Int ={}{T} Int

T |-{m} Top ={}{T} Top

A != Top
---------------
T |-{m} A <{}{T} Top

a_m in T
-------------
T |-{m} a ={}{a} a 

a_!m in T
----------------
T |-{m} a ={a}{} a

T, a_m |- A ~{a*}{b*} B, a \in bs
---------------------------
T |-{m} mu a. A ~{a*\a}{b*\a} mu a. B

T |-{!m} C ~1{b1*} A    T |-{m} B ~2{b2*} D 
---------------------------------
T |-{m} A -> B (~1 & ~2){b1* intersect b2*}  C -> D 

<{b*} less than, and all variables in b* occur weakly positively
={a*}{b*} equal, and all variables in b* occur weakly positively on the condition that all a in a* should be equal


Logic Table for Modes:

~1   | ~2 | ~1 & ~2
-------------------
 <   | <   | <
 <   | =   | <
 =   | <   | <
 =a* | =b* | =(a + b)* 
 =a+ | <   | ERROR
 <   | =a+ | ERROR






Example 1: Works as expected

+a |-{-} a <{a} Top             +a |-{+} a ={}{a} a
-------------------------------------------
+a |- Top -> a <{a} a -> a
-------------------------------------
. |-{+} mu a . Top -> a <{} mu a . a -> a



Example 2: Fails as expected

+a |-{-} a ={a} a            +a |-{+} Int < Top a
-------------------------------------------
+a |- a -> Int (=a & <) a -> Top       (fails here: (=a & <) ==> ERROR) 
---------------------------------------------
. |-{+} mu a . a -> Int ERROR mu a . a -> Top

Example 3: Works as expected

+a |-{-} a ={a}{} a           +a |-{+} a ={a} a
------------------------------------------
+a |-{+} a -> a ={a}{...?} a -> a
------------------------------------
. |-{+} mu a. a -> a = mu a. a -> a

Example 4: Works as expected

see example 3
------------------------------------
. |-{+} mu a . a -> a = mu a. a -> a      . |-{-} Int < Top
-----------------------------------------------------------
. |-{-} (mu a . a -> a) -> Int < (mu a . a -> a) -> Top

Example 5: Fails as expected

                      +a |-{-} a ={a} a   +a |-{+} a = a 
                      ----------------------------------  
+a |-{-} Int < Top    +a |-{+} a -> a ={a} a -> a
-------------------------------------------------
+a |-{+} Top -> a -> a  ERROR  Int -> a -> a
----------------------------------------------------
. |-{+} mu a. Top -> a -> a ERROR mu a . Int -> a -> a




New Example 6: should fail

+b, +a |-{-} b ={b}{a} b          +b, +a |-{+} a ={}{a,b} a
--------------------------------------------------------
+b, +a |-{+} b -> a ={b}{a} b -> a
--------------------------------------------- posvar a (mu b. b -> a) (mu b. b -> a)
                                             ({a} - fv_tt (b -> a) = {})
+a |-{+} (mu b. b -> a) ={}{} (mu b. b -> a)         +a |-{-} a <{a} Top   
----------------------------------------------------------------------------
+a |-{+} Top -> (mu b. b -> a) <{...?}  a -> (mu b. b -> a)
----------------------------------------------------------------------------
. |-{+} mu a. Top -> (mu b. b -> a) < mu a. a -> (mu b. b -> a)


Example 7: should work

+a, +b, +c |- Int <{a,b,c} Top
--------------------------------------------------
+a, +b |-{+} mu c. Int <{a,b} mu c. Top
--------------------------------------------------
+a |-{+} (mu b. mu c. Int) <{a} (mu b. mu c. Top)     +a |-{-} Int ={}{a} Int
----------------------------------------------------------------------------
. |-{+} mu a. Int -> (mu b. mu c. Int) < mu a. Int -> (mu b. mu c. Top)


Example 8: should work

+a +b |-{-} b ={b}{a} b     +a +b |-{+} Int ={}{a, b} Int
----------------------------------------------
+a +b |-{+} b -> Int ={b}{a} b -> Int
----------------------------------------------  ({a} - fv_tt (b -> Int) = {a})
+a |-{+} (mu b. b -> Int) ={}{a} (mu b. b -> Int)              +a |-{-} Int < Top
----------------------------------------------------------------------------
+a |-{+} Top -> (mu b. b -> Int) < Int -> (mu b. b -> Int)
----------------------------------------------------------------------------
. |-{+} mu a. Top -> (mu b. b -> Int) < mu a. Int -> (mu b. b -> Int)